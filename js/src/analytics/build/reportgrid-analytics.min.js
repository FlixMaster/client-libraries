(function(){function c(a){if(typeof a==="function")throw"SwfCookie Error: Functions cannot be used as keys or values.";}var h=0,p=/[^a-z0-9_]/ig;window.SwfCookie=function(a){function c(b){var g=document.createElement("div");document.body.appendChild(g);g.id="SwfCookie_"+a.namespace+"_"+h++;if(!b)g.style.position="absolute",g.style.top="-2000px",g.style.left="-2000px";return g}function m(){n||(n=!0,setTimeout(function(){r.setObject(f);n=!1;f={}},a.batch_delay))}var a=a||{},k={swf_url:"swfcookie.swf",
namespace:"swfcookie",debug:!1,timeout:10,onready:null,onerror:null,batch_requests:!0,batch_delay:500},b;for(b in k)k.hasOwnProperty(b)&&(a.hasOwnProperty(b)||(a[b]=k[b]));a.namespace=a.namespace.replace(p,"_");if(window.SwfCookie[a.namespace])throw"There is already an instance of SwfCookie using the '"+a.namespace+"' namespace. Use that instance or specify an alternate namespace in the config.";this.config=a;if(a.debug){if(typeof console==="undefined"){var q=c(!0);window.console={log:function(a){var b=
c(!0);b.innerHTML=a;q.appendChild(b)}}}this.log=function(c,b,d){b=b==="swfCookie"?"swf":b;if(typeof console[c]!=="undefined")console[c]("SwfCookie - "+a.namespace+" ("+b+"): "+d);else console.log("SwfCookie - "+a.namespace+": "+c+" ("+b+"): "+d)}}else this.log=function(){};this.log("info","js","Initializing...");SwfCookie[a.namespace]=this;k=c(a.debug);b="SwfCookie_"+a.namespace+"_"+h++;var l="logfn=SwfCookie."+a.namespace+".log&amp;onload=SwfCookie."+a.namespace+".onload&amp;onerror=SwfCookie."+
a.namespace+".onerror&amp;LSOName="+a.namespace;k.innerHTML='<object height="100" width="500" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+b+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">\t<param value="'+a.swf_url+'" name="movie">\t<param value="'+l+'" name="FlashVars">\t<param value="always" name="allowScriptAccess">\t<embed height="375" align="middle" width="500" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+l+'" type="application/x-shockwave-flash" allowscriptaccess="always" quality="high" loop="false" play="true" name="'+
b+'" bgcolor="#ffffff" src="'+a.swf_url+'"></object>';var r=this.swf=document[b]||window[b],f={},n=!1;this.batchSet=function(a,b){f[a]=b;m()};this.batchSetObject=function(a){for(var b in a)a.hasOwnProperty(b)&&(f[b]=a[b]);m()};this.batchGet=function(a){return f.hasOwnProperty(a)?f[a]:this.swf.get(a)};this.batchGetAll=function(a){for(var b in f)f.hasOwnProperty(b)&&(a[b]=f[b]);return a};this.batchRemove=function(a){delete f[a]};this.batchClear=function(){f={}};this._timeout=setTimeout(function(){SwfCookie[a.namespace].log("error",
"js","Timeout reached, assuming "+a.swf_url+" failed to load and firing the onerror callback.");if(a.onerror)a.onerror()},a.timeout*1E3)};SwfCookie.prototype={version:"1.5",ready:!1,set:function(a,d){this._checkReady();c(a);c(d);this.config.batch_requests?this.batchSet(a,d):this.swf.set(a,d)},setObject:function(a){this._checkReady();c(a);this.config.batch_requests?this.batchSetObject(a):this.swf.setObject(a)},get:function(a){this._checkReady();c(a);if(this.config.batch_requests){var d=this.batchGet(a);
if(null!=d)return d}return this.swf.get(a)},getAll:function(){this._checkReady();var a=this.swf.getAll();a.__flashBugFix&&delete a.__flashBugFix;return this.config.batch_requests?this.batchGetAll(a):a},remove:function(a){this._checkReady();c(a);this.config.batch_requests&&this.batchRemove(a);this.swf.remove(a)},clear:function(){this._checkReady();this.config.batch_requests&&this.batchClear();this.swf.clear()},_checkReady:function(){if(!this.ready)throw"SwfCookie is not yet finished initializing. Pass a config.onready callback or wait until this.ready is true before trying to use a SwfCookie instance.";
},onload:function(){var a=this;setTimeout(function(){clearTimeout(a._timeout);a.ready=!0;a.set("__flashBugFix","1");if(a.config.onready)a.config.onready()},0)},onerror:function(){clearTimeout(this._timeout);if(this.config.onerror)this.config.onerror()}}})();
(function(c){var h={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(c){for(var a=0;a<c.length;a++){var d=c[a].string,h=c[a].prop;this.versionSearchString=c[a].versionSearch||c[a].identity;if(d){if(d.indexOf(c[a].subString)!=-1)return c[a].identity}else if(h)return c[a].identity}},
searchVersion:function(c){var a=c.indexOf(this.versionSearchString);return a==-1?void 0:parseFloat(c.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},
{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",
versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.appVersion,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};h.init();c.client={os:h.OS,browser:h.browser,version:h.version}})(jQuery);
(function(c){var h=+new Date,p=function(a,c){var b=a.exec(c);return b&&b[1]},a=function(a,c){return Math.round(a/c)*c},d=function(){for(var a={pageEngagement:/^queueing|polling|none$/,cookieNamespace:/^\w+$/,attentionResolution:/[1-9]\d*/,crossdomain:/^true|false$/,interaction:/^true|false$/,attention:/^true|false$/,scrolling:/^true|false$/},b=c("script").eq(-1).attr("src").replace(/^.*\?/,"").split(/&/),d=null,i={},h=function(a){return a==="false"?!1:a==+a?+a:a},e=0,f=b.length;e<f;++e)i[(d=b[e].split(/=/))[0]]=
h(d.slice(1).join("="));for(var g in i)if(a.hasOwnProperty(g)&&i.hasOwnProperty(g)&&!a[g].test(i[g]))throw Error('Invalid parameter for option "'+g+'": '+i[g]);return c.extend({},{pageEngagement:"queueing",cookieNamespace:"all",attentionResolution:10,crossdomain:!0,interaction:!1,attention:!1,scrolling:!1,rollup:!0,rollupName:"__all",attentionSelector:"body"},i)}(),m=ReportGrid.normalizePath=function(a){return"/"+/^(?:(?:file|https?):\/\/)?(?:www\.)?([^\?#]+)/i.exec(a)[1]},k=m(document.location.href),
b=function(a,c){var b=function(a){a.setDate(a.getDate()+36500);return a}(new Date);if(arguments.length<=1)return p(RegExp("\\b"+a+"=([^;]*)"),document.cookie);document.cookie=a+"="+c+"; expires="+b.toUTCString();return c},q=c.client.browser+" "+c.client.version,l=c.client.os,r=/iphone/i.test(l)||/android/i.test(l)?"mobile":"standard",f=!!document.referrer&&m(document.referrer),n=/^http:\/\/www\.google\.com/.test(document.referrer)&&decodeURIComponent(p(/[\?&]q=([^&]*)/,document.referrer))||/^http:\/\/search\.yahoo\.com/.test(document.referrer)&&
decodeURIComponent(p(/[\?&]p=([^&]*)/,document.referrer)).replace(/\+/g," ")||/^http:\/\/www\.bing\.com/.test(document.referrer)&&decodeURIComponent(p(/[\?&]q=([^&]*)/,document.referrer)).replace(/\+/g," ")||"",x=(new Date).getHours()-(new Date).getUTCHours(),g=function(a){if(a.attr("id"))return"#"+a.attr("id");for(var c=a[0].nodeName.toLowerCase(),a=a[0].className.split(/\s+/),b=0,d=a.length;b<d;++b)a[b]&&(c+="."+a[b]);return c},e=ReportGrid.customEvent=function(b,g,e){var i={},j=e&&e.path||k;e&&
delete e.path;i[b]=c.extend({},{browserVersion:q,operatingSystem:l,platform:r,totalVisits:w,totalInteraction:u,totalEngagement:a(v+(+new Date-h),1E3),referrer:f,timeOffset:x,"~keywords":n},g||{});b=[j];if(d.rollup){j=j.split(/\//g);for(j.pop();j.length>0;)b.push("/"+j.join("/")+"/"+d.rollupName),j.pop()}else b.push("/"+d.rollupName);return ReportGrid.track(b,c.extend({},e,{event:i}))},w=0,u=0,v=0;e("visited");var s=function(){if(t){var f=b;b=function(a,b){return arguments.length>1?(f(a,b),t.set(a,
b),b):t.get(a)||f(a)}}var o=function(){for(var a="",c=0;c<32;++c)a+=(Math.random()*16>>>0).toString(16);l=!0;return b("reportgrid_identity",a)},l=!1;b("reportgrid_identity")||o();o=function(){var a=+new Date-function(){var a=b("reportgrid_last_visit")||+new Date;b("reportgrid_last_visit",+new Date);return a}();return a>2592E6?"yearly":a>6048E5?"monthly":a>864E5?"weekly":a>1E3?"hourly":"new"}();w+=b("reportgrid_total_visits",(+b("reportgrid_total_visits")||0)+1);v+=+b("reportgrid_total_engagement")||
0;l?e("uniqueVisited"):e("repeatVisited",{timeFrame:o});c(function(){e("loaded",{delay:a(+new Date-h,50)})});p(/https?:\/\/([^\/]+)\//,document.referrer)===(document.location.host||document.location.hostname)?+b("reportgrid_already_unbounced")||(o=+b("reportgrid_bounce_time"),b("reportgrid_already_unbounced",1),e("bounce",{},{path:b("reportgrid_bounce_path"),count:-1,timestamp:new Date(o)})):(b("reportgrid_already_unbounced",0),o=+new Date,b("reportgrid_bounce_path",k),b("reportgrid_bounce_time",
o),e("bounce",{},{timestamp:new Date(o)}));c('a, button, input[type="submit"]').live("click",function(){var a=this.nodeName.toLowerCase();e(a==="a"?"linkClicked":a==="button"?"buttonClicked":a==="input"?"submitClicked":a+"Clicked",{element:g(c(this)),newWindow:c(this).attr("target")==="_blank"})});c("form").live("submit",function(){var a={};c(this).find('select, input[type="checkbox"]').each(function(){a[g(c(this))]=c(this).val()});e("formSubmitted",a)});var i=0;d.scrolling&&setInterval(function(){var a=
c(window).height(),b=c(window).scrollTop(),d=c("body").height(),a=(a+b)/d*10>>>0;a>i&&(e("saw",{region:a}),i=a)},100);c("*").live("click",function(a){a.target===this&&(++u,d.interaction&&e("interaction",{element:g(c(this)),type:"click"}))});c("*").live("keypress",function(a){a.target===this&&a.which===13&&(++u,d.interaction&&e("interaction",{element:g(c(this)),type:"enterKey"}))});c('a[href^="mailto:"]').live("click",function(){e("emailed",{address:c(this).attr("href").replace(/^mailto:/,"")})});
d.pageEngagement==="queueing"&&b("reportgrid_page_engagement_time")&&b("reportgrid_page_engagement_last_url")&&e("engagedQueueing",{time:a(+b("reportgrid_page_engagement_time"),2E3)},b("reportgrid_page_engagement_last_url"),new Date(+b("reportgrid_page_last_engagement_start_time")));b("reportgrid_page_engagement_last_url",k);b("reportgrid_page_last_engagement_start_time",+new Date);setInterval(function(){b("reportgrid_page_engagement_time",+new Date-h);b("reportgrid_user_total_engagement",v+(+new Date-
h))},2E3);var j=function(b){setTimeout(function(){e("engagedPolling",{time:a(+new Date-h,1E3)});j(b*2)},b)};d.pageEngagement==="polling"&&j(1E3);if(d.attention){var m=null,n=0,r=0,q=d.attentionResolution,s=1/q;c(d.attentionSelector+" *").live("mousemove",function(b){if(this===b.target){var d=c(this).offset(),f=b.pageY-d.top,b=a((b.pageX-d.left)/c(this).width(),s)*q>>>0,f=a(f/c(this).height(),s)*q>>>0;b===n&&f===r&&this===m||(m=this,n=b,r=f,e("attention",{element:g(c(this)),tileX:b,tileY:f}))}})}},
t=null;d.crossdomain?c(function(){t=new SwfCookie({namespace:d.cookieNamespace,swf_url:"http://api.reportgrid.com/js/swfcookie.swf",onready:s,onerror:function(){t=null;s()}})}):s()})(jQuery);
